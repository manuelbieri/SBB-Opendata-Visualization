<!DOCTYPE html>
<html lang="en">
<head>
    <title>SBB - OpenData</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap/ion.rangeSlider.min.css">
    <script src="js/d3/d3.min.js"></script>
    <script src="js/d3/d3-force-reuse.min.js"></script>
    <script src="js/bootstrap/jquery.min.js"></script>
    <script src="js/bootstrap/bootstrap.min.js"></script>
    <script src="js/bootstrap/ion.rangeSlider.min.js"></script>
    <script src="js/bootstrap/bootstrappp.js"></script>
</head>
<body>
<div class="jumbotron jumbotron-fluid text-center bg-dark text-white-50" style="margin-bottom:0">
    <div class="container">
    <h1>Open Data Visualisierung</h1>
    <h4>Pünktlichkeit der IC-Verbindungen am Bahnhof Bern</h4>
</div>
</div>

<nav class="navbar navbar-expand-sm bg-dark navbar-dark sticky-top">
    <a class="navbar-brand" href="#hello">Home</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="collapsibleNavbar">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="#visualisierung">Visualisierung</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#data">Daten</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#thx">Danksagung</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#about">Über uns</a>
            </li>
        </ul>
    </div>
</nav>

<div class="container">

    <div class="card custom-card" id="hello">
        <div class="card-header">
            <br>
            <br>
            <h2> Herzlich Willkommen</h2>
        </div>
        <div class="card-body">
            <p>Diese Visualisierung entstand im Rahmen der Open Data Vorlesung am Institut für Wirtschaftsinformatik der Universität Bern. Mithilfe von Open Data der Schweizerischen Bundesbahnen SBB, haben wir die Pünktlichkeit in Abhängigkeit mit dem Wetter als Visualisierung realisiert.</p>
            <h4>Zur Anwendung</h4>
            <p>Du hast die Möglichkeit, entweder nach Linien oder nach dem Rollmaterial zu sortieren. Standardmässig sind 3 Minuten als Verspätung gewählt, du kannst aber auch 5min, 10min oder 15min wählen. Dabei wird der Kreis im Verhältnis grösser dargestellt, wenn die Verspätung des Zuges grösser war, als die gewählte Zeit. Wenn du dich für eines entschieden hast, musst du zwei Wettereinflüsse selektionieren. Viel Spass beim Zuschauen, wie sich die Punkte bewegen!
                <br>Klicke nun auf die untenstehenden Links, um mehr über die Möglichkeiten der Visualisierung zu erfahren.  </p>
            <div id="accordion">
                <div class="card">
                    <div class="card-header">
                        <a class="collapsed card-link" data-toggle="collapse" href="#collapseTwo">
                            Rollmaterial
                        </a>
                    </div>
                    <div id="collapseTwo" class="collapse" data-parent="#accordion">
                        <div class="card-body">
                            In unserem Datensatz sind vier verschiedene Zugkompositionen enthalten. Wenn Du nach Rollmaterial filterst, sortieren sich die Punkte nach ihrem Rollmaterial. Im Bilderkarussell siehst Du, wie die einzelnen Züge in echt aussehen.
                            Dabei unterscheiden wir zwischen folgenden Kompositionen, wobei die Farbe der Liste, gerade die entsprechende Punktfarbe zeigt.
                           <br>
                            <br>
                            <ul class="list-group list-group">
                                <li class="list-group-item list-group-item-success">IC2000</li>
                                <li class="list-group-item list-group-item-secondary">FVDosto</li>
                                <li class="list-group-item list-group-item-info">ICN</li>
                                <li class="list-group-item list-group-item-warning">Eurocity</li>
                            </ul>
                            <br>Ist der neue FV-Dosto öfters verspätet als die alten Züge? Finde es heraus!
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <a class="collapsed card-link" data-toggle="collapse" href="#collapseThree">
                          Linien
                        </a>
                    </div>
                    <div id="collapseThree" class="collapse" data-parent="#accordion">
                        <div class="card-body">
                            Wenn Du nach Linien sortierst, ordnen sich die Punkte nach folgenden InterCity-Linien, welche alle über den Bahnhof Bern gehen.
                            <br>
                            <br>
                            <ul class="list-group list-group">
                                <li class="list-group-item list-group-item-success">IC1 Genève-Aéroport - Bern - Zürich HB - St.Gallen</li>
                                <li class="list-group-item list-group-item-secondary">IC6 Basel SBB - Bern - Brig</li>
                                <li class="list-group-item list-group-item-info">IC8 Brig - Bern - Zürich HB - Romanshorn</li>
                                <li class="list-group-item list-group-item-warning">IC61 Basel SBB - Bern - Interlaken Ost</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="card-header">
                        <a class="collapsed card-link" data-toggle="collapse" href="#collapseFour">
                            Wetter
                        </a>
                    </div>
                    <div id="collapseFour" class="collapse" data-parent="#accordion">
                        <div class="card-body">
                            Beim Wetter hast Du die meisten Möglichkeiten, nach was du filtern willst.
                            <br>Hast Du dich schon immer gefragt, ob dein Zug bei Schnee mehr Verspätung hat? Finde es heraus, indem du den Filter "Schnee" auswählst.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card custom-card" id="visualisierung">
        <div class="card-header">
            <br>
            <br>
            <h2>Visualisierung</h2>
        </div>
        <div class="row m-1">
            <div class="col-lg-2 col-4 p-1">
                <div class="input-group">
                    <label for="selectColor"></label>
                    <select class="custom-select" id="selectColor" onchange="changeColors(isRollingStockColor())">
                        <option selected>Linie</option>
                        <option>Rollmaterial</option>
                    </select>
                </div>
            </div>
        <div class="col-lg-2 col-4 p-1">
            <div class="input-group">
                <label for="cutoff3"></label>
                <select class="custom-select" id="cutoff3" onchange="changedDelayCutoff()">
                    <option>3 Min</option>
                    <option>5 Min</option>
                    <option>10 Min</option>
                    <option>15 Min</option>
                </select>
            </div>
        </div>
        <div class="col-lg-2 col-4 p-1">
            <div class="input-group">
                <label for="selectPerformance"></label>
                <select class="custom-select" id="selectPerformance">
                    <option value="fast">Fast (small date range)</option>
                    <option value="slow">Slow (big date range)</option>
                </select>
            </div>
        </div>
        <div class="col-lg-2 col-6 p-1">
            <div class="input-group">
                <label for="select1"></label>
                <select class="custom-select" id="select1" onchange="changedInput(true)">
                    <option>Luftdruck</option>
                    <option>Luftfeuchtigkeit</option>
                    <option>Lufttemperatur</option>
                    <option>Niederschlag</option>
                    <option selected>Schnee</option>
                    <option>Sonnenschein</option>
                    <option>Globalstrahlung</option>
                </select>
            </div>
        </div>
        <div class="col-lg-1 col-6 p-1">
            <div class="input-group">
                <label for="cutoff1"></label>
                <input type="text" class="form-control" id="cutoff1" value="6" aria-describedby="cutoff1-addon" onchange="changedInput(true)">
                <div class="input-group-append">
                    <span class="input-group-text" id="cutoff1-addon"></span>
                </div>
            </div>
        </div>
        <div class="col-lg-2 col-6 p-1">
            <div class="input-group">
                <label for="select2"></label>
                <select class="custom-select" id="select2" onchange="changedInput(true)">
                    <option>Luftdruck</option>
                    <option selected>Luftfeuchtigkeit</option>
                    <option>Lufttemperatur</option>
                    <option>Niederschlag</option>
                    <option>Schnee</option>
                    <option>Sonnenschein</option>
                    <option>Globalstrahlung</option>
                </select>
            </div>
        </div>
        <div class="col-lg-1 col-6 p-1">
            <div class="input-group">
                <label for="cutoff2"></label>
                <input type="text" class="form-control" id="cutoff2" value="90" aria-describedby="cutoff2-addon" onchange="changedInput(true)">
                <div class="input-group-append">
                    <span class="input-group-text" id="cutoff2-addon"></span>
                </div>
            </div>
        </div>
    </div>
    <div class="row mr-1 ml-1 custom-row">
        <div class="col-lg-6">
            <label for="slider1"></label>
            <input type="text" id="slider1" class="js-range-slider"/>
        </div>
        <div class="col-lg-6">
            <label for="slider2"></label>
            <input type="text" id="slider2" class="js-range-slider"/>
        </div>
    </div>
    <div>
        <svg viewBox="0 0 940 600" preserveAspectRatio="xMinYMin meet" id="canvas"></svg>
        <script src="js/app.js"></script>
        <script>
            adjustUnits();
        </script>
    </div>
    <div class="row">
        <div class="col-md-4">
            <table class="table table-hover">
                <thead>
                <tr>
                    <th colspan="2">Zug Information</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <th scope="row">Linie</th>
                    <td id="line"></td>
                </tr>
                <tr>
                    <th scope="row">Linien Nummer</th>
                    <td id="lineNumber"></td>
                </tr>
                <tr>
                    <th scope="row">Betriebstag</th>
                    <td id="dayOfService"></td>
                </tr>
                <tr>
                    <th scope="row">Ankunftszeit</th>
                    <td id="arrival"></td>
                </tr>
                <tr>
                    <th scope="row">Verspätung</th>
                    <td id="delay"></td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="col-md-3">
            <table class="table table-hover">
                <thead>
                <tr>
                    <th colspan="2">Wetter</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <th scope="row">Sonnenschein</th>
                    <td id="sunshine"></td>
                </tr>
                <tr>
                    <th scope="row">Niederschlag</th>
                    <td id="rainfall"></td>
                </tr>
                <tr>
                    <th scope="row">Schnee</th>
                    <td id="snow"></td>
                </tr>
                <tr>
                    <th scope="row">Lufttemperatur</th>
                    <td id="temperature"></td>
                </tr>
                <tr>
                    <th scope="row">Luftfeuchtigkeit</th>
                    <td id="humidity"></td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="col-md-5">
            <div id="imageCarousel" class="carousel slide" data-ride="carousel">
                <ol class="carousel-indicators">
                    <li data-target="#imageCarousel" data-slide-to="0" class="active"></li>
                    <li data-target="#imageCarousel" data-slide-to="1"></li>
                    <li data-target="#imageCarousel" data-slide-to="2"></li>
                    <li data-target="#imageCarousel" data-slide-to="3"></li>
                </ol>
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img class="d-block w-100" src="" alt="" id="imageCarousel1">
                    </div>
                    <div class="carousel-item">
                        <img class="d-block w-100" src="" alt="" id="imageCarousel2">
                    </div>
                    <div class="carousel-item">
                        <img class="d-block w-100" src="" alt="" id="imageCarousel3">
                    </div>
                    <div class="carousel-item">
                        <img class="d-block w-100" src="" alt="" id="imageCarousel4">
                    </div>
                </div>
                <a class="carousel-control-prev" href="#imageCarousel" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#imageCarousel" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
        </div>
    </div>
</div>

    <div class="card custom-card" id="data">
        <div class="card-header">
            <br>
            <br>
            <h2> Datensatz und Links </h2></div>
        <div class="card-body">
            <h5>Zusammengesetzter Datensatz</h5>
            <p>Der Datensatz, welcher die Grundlage für die Visualisierung darstellt, ist zusammengesetzt aus Daten zur Pünkltichkeit, Rollmaterial und Wetter.
            <br>Ein Element des zusammengesetzten Datensatzes enthält die Informationen zur Pünktlichkeit (Betriebstag, AN_Prognose, Ankunftszeit), zur Linie und dem Rollmaterial (LINIEN_IC, LINIEN_TEXT, block) und dem Wetter (globalstrahlung, schnee, luftdruck, niederschlag, sonnenschein, lufttemperatur, luftfeuchtigkeit).
           </p>
            <h5>Daten und Quellen</h5>
            <table class="table table-striped">
                <thead>
                <tr>
                    <th scope="col">Daten</th>
                    <th scope="col">Quellen</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>Eigener Datensatz (.json)</td>
                    <td><a href="https://gist.githubusercontent.com/manuelbieri/5a20c884020ed05e89b3426e78ae97c5/raw/7c31a08bee5c661f9e71a003ea4b56deb33432aa/sbb_data_v2.json">Datensatz .json-file</a> </td>
                </tr>
                <tr>
                    <td>Pünktlichkeitsdaten</td>
                    <td><a href="https://opentransportdata.swiss/en/dataset/istdaten">opentransportdata.swiss</a></td>
                </tr>
                <tr>
                    <td>Rollmaterial</td>
                    <td><a href="https://data.sbb.ch/explore/dataset/jahresformation/information/">data.sbb.ch</a></td>
                </tr>
                <tr>
                    <td>Wetterdaten</td>
                    <td><a href="https://data.geo.admin.ch/ch.meteoschweiz.klima/nbcn-tageswerte/">data.geo.admin.ch</a></td>
                </tr>
                <tr>
                    <td>Bilder der Zugkompositionen</td>
                    <td><a href="https://www.sbb.ch/de/bahnhof-services/waehrend-der-reise/unsere-zuege.html">sbb.ch</a></td>
                </tr>
                </tbody>
            </table>
            <br>
            <h5>Lizenzen und Quellen</h5>
            <table class="table table-striped">
                <thead>
                <tr>
                    <th scope="col">Lizenzen</th>
                    <th scope="col">Quellen</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>Creating Bubble Charts with D3v4 - Jim Vallandingham</td>
                    <td><a href="https://vallandingham.me/bubble_charts_with_d3v4.html">Jim Vallandingham</a>
                    <br><a href="https://github.com/vlandham/bubble_chart_v4/blob/master/LICENSE">github-Lizenz</a></td>
                </tr>
                <tr>
                    <td>D3 BSD 3-Clause "New" or "Revised" License</td>
                    <td><a href="https://github.com/d3/d3">BSD 3-Clause</a></td>
                </tr>
                <tr>
                    <td>D3-force-reuse BSD 3-Clause "New" or "Revised" License</td>
                    <td><a href="https://github.com/twosixlabs/d3-force-reuse">BSD 3-Clause: force reuse</a></td>
                </tr>
                <tr>
                    <td>Zeitslider MIT-Lizenz</td>
                    <td><a href="https://github.com/IonDen/ion.rangeSlider">ion.rangeSlider</a></td>
                </tr>
                </tbody>
            </table>
            <h5>Lizenz</h5>
            <p>Unsere Visualisierung wird unter der MIT Lizenz veröffentlicht. Alle zuvor genannten Lizenzen sind mit dieser kompatibel.</p>
            <div id="accordionTwo">
                <div class="card">
                    <div class="card-header">
                        <a class="collapsed card-link" data-toggle="collapse" href="#collapseSix">MIT-Lizenz</a>
                    </div>
                    <div id="collapseSix" class="collapse" data-parent="#accordionTwo">
                        <div class="card-body">
                            Copyright 2021 Allgaier Joël & Bieri Manuel
                            <br>
                            <br>
                            Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
                            <br>
                            <br>
                            The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
                            <br>
                            <br>
                            THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="card custom-card" id="thx">
        <div class="card-header">
            <br>
            <br>
            <h2> Danksagung </h2></div>
        <div class="card-body">
        <p>Wir möchten uns herzlich bei unserem Data-Coach Christian Trachsel bedanken, welcher uns die Open Data der SBB geliefert hat und uns mit guten Tipps weiterhelfen konnte. Es hat uns Spass gemacht, an der Visualisierung zu arbeiten!
       <br>
            <br>Weiter sind wir dem Open Data Team der Universität Bern dankbar. Besonders den Programming-Coaches Simon Kafader & Maurizio Piu, welche ihr breites Wissen mit uns teilten und stets die richtige Lösung zur Stelle hatten.</p>
        </div>
    </div>

    <div class="card custom-card" id="about">
        <div class="card-header">
            <br>
            <br>
            <h2> Über uns  </h2></div>
        <div class="row">
            <div class="col-md-6">
             <div class="card mx-auto my-3" style="width: 300px;">
                 <img class="card-img-top img-fluid img-width align-content-center justify-content-center" src="Graphics/Images/about/manuel.jfif" alt="Card image">
                 <div class="card-body">
                     <h4 class="card-title">Manuel Bieri</h4>
                     <p class="card-text">Bachelor of Science in Economics, Universität Bern</p>
                         <a href="mailto:manuel.bieri@students.unibe.ch" class="btn btn-primary">Kontakt</a>
                     </div>
                 </div>
             </div>
            <div class="col-md-6">
                <div class="card mx-auto my-3" style="width: 300px;">
                    <img class="card-img-top" src="Graphics/Images/about/joel.JPG" alt="Card image">
                    <div class="card-body">
                        <h4 class="card-title">Joël Allgaier</h4>
                        <p class="card-text">Bachelor of Science in Economics, Universität Bern</p>
                        <a href="mailto:joel.allgaier@students.unibe.ch" class="btn btn-primary">Kontakt</a>
                    </div>
                </div>
            </div>
            </div>
        </div>
</div>
<div class="jumbotron jumbotron-fluid text-center bg-dark text-white-50" style="margin-bottom:0">
    <p>Lizenziert unter der MIT-license</p>
</div>
</body>
</html>
